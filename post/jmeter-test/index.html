<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>åœ¨Macä¸Šåˆ©ç”¨å‹æµ‹å·¥å…·Jmeter-Suiteè¿›è¡Œä¸€æ¬¡å‹æµ‹å®è·µçš„ä¿å§†çº§è¯¦ç»†æ­¥éª¤ï¼ˆå‚è€ƒè…¾è®¯äº‘æ–‡ç« ï¼‰ | Nana&#39;s Blog</title>

<link rel="shortcut icon" href="https://nanagan.github.io/favicon.ico?v=1613854285127">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://nanagan.github.io/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ">
        <div class="site-name gt-c-content-color-first">
            Nana&#39;s Blog
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            é¦–é¡µ
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link">
                            å½’æ¡£
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            æ ‡ç­¾
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            å…³äº
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1613854285127" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    åœ¨Macä¸Šåˆ©ç”¨å‹æµ‹å·¥å…·Jmeter-Suiteè¿›è¡Œä¸€æ¬¡å‹æµ‹å®è·µçš„ä¿å§†çº§è¯¦ç»†æ­¥éª¤ï¼ˆå‚è€ƒè…¾è®¯äº‘æ–‡ç« ï¼‰
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        Â· 2021-02-21 Â·
                    </time>
                    
                        <a href="https://nanagan.github.io/tag/L2_5xxyiA/" class="post-tags">
                            # å‹æµ‹
                        </a>
                    
                </div>
                <div class="post-content">
                    <h2 id="å‚è€ƒçš„æ–‡ç« ">å‚è€ƒçš„æ–‡ç« </h2>
<p><a href="https://cloud.tencent.com/developer/article/1776927">å‹æµ‹å·¥å…·Jmeter-Suiteè¯¦ç»†æ“ä½œæ­¥éª¤</a></p>
<h2 id="å†™æ­¤æ–‡çš„ç›®çš„">å†™æ­¤æ–‡çš„ç›®çš„</h2>
<p>ç”±äºæˆ‘æ˜¯åˆšå¼€å§‹æ¥è§¦kuberneteså’Œjmeterï¼Œæ‰€ä»¥åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šå¾ˆå¤šé—®é¢˜ï¼ŒåŒæ—¶æˆ‘å¾ˆçƒ¦æ¼ä¸ºä»€ä¹ˆç½‘ä¸Šæ²¡æœ‰æ–‡ç« æ˜¯ä»çœŸæ­£<strong>é›¶åŸºç¡€</strong>åœ°è®°å½•éƒ¨ç½²çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚å®‰è£…brewå’Œhelm3ä¹‹ç±»çš„æ­¥éª¤éƒ½è¢«çœç•¥äº†ï¼Œåƒæˆ‘è¿™ç§èœèœå°±å¾ˆæŠ“çã€‚æ‰€ä»¥åœ¨æˆ‘ç»ˆäºæ‘¸åˆ°äº†kubernetesä¸–ç•Œçš„å¤§é—¨ã€ç¢°åˆ°äº†å‹æµ‹çš„è¾¹è¾¹åï¼Œæˆ‘å†³å®šå†™ä¸€ç¯‡æ–‡ç« å›é¦ˆèœèœä»¬ã€‚</p>
<h2 id="éœ€è¦çš„èƒŒæ™¯çŸ¥è¯†">éœ€è¦çš„èƒŒæ™¯çŸ¥è¯†</h2>
<ul>
<li>é˜…è¯»ã€Škubernetesæƒå¨æŒ‡å—ã€‹ç¬¬ä¸€ç«   ï¼ˆä¸è¯»ä¹Ÿè¡Œï¼Œå°±æ˜¯è¦äº†è§£kubernetesçš„åŸºæœ¬æ¦‚å¿µï¼Œæˆ‘ä¸ªäººè§‰å¾—è¿™æœ¬ä¹¦å†™å¾—ä¸é”™ï¼‰</li>
<li>é˜…è¯» <a href="https://www.zhihu.com/column/p/26729512">JMeterä»‹ç»</a>   ï¼ˆäº†è§£jmeterçš„ä½œç”¨ï¼‰</li>
</ul>
<h2 id="æˆ‘çš„ç³»ç»Ÿ">æˆ‘çš„ç³»ç»Ÿ</h2>
<figure data-type="image" tabindex="1"><img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128192542201-300916945.png" alt="" loading="lazy"></figure>
<h2 id="è¯¦ç»†æ­¥éª¤">è¯¦ç»†æ­¥éª¤</h2>
<p>çœç•¥è´­ä¹°å‹æµ‹æœºå™¨éƒ¨åˆ†çš„å†…å®¹ï¼Œç›´æ¥è·³åˆ°<strong>å‹æµ‹å·¥å…·å®‰è£…</strong>éƒ¨åˆ†å¼€å§‹ ã€‚</p>
<h3 id="1-å®‰è£…brew">1 å®‰è£…brew</h3>
<blockquote>
<p>brewæ˜¯ä¸€ä¸ªmacä¸Šé¢å¾ˆå¥½ç”¨çš„è½¯ä»¶ç®¡ç†ç³»ç»Ÿï¼Œå¯ä»¥ç®€åŒ–macä¸Šçš„å®‰è£…è¿‡ç¨‹ã€‚</p>
</blockquote>
<p>æˆ‘ç”¨äº†ä¸€ä¸ªçŸ¥ä¹ä¸“æ ä¸Šçš„è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œé“¾æ¥æ˜¯<a href="https://zhuanlan.zhihu.com/p/111014448">Homebrewå›½å†…å¦‚ä½•è‡ªåŠ¨å®‰è£…ï¼ˆå›½å†…åœ°å€ï¼‰</a> ï¼ŒçœŸè¯šè¡¨ç™½ä½œè€…ï¼ŒåŸæœ¬ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢çš„ï¼Œç°åœ¨ä¸‹è½½é€Ÿåº¦é£å‡ T^T<br>
pså®‰è£…æœŸé—´æˆ‘é‡åˆ°äº†å„ç§é—®é¢˜ï¼Œå› ä¸ºæˆ‘åŸæœ¬çš„macç³»ç»Ÿå¾ˆä½ï¼Œå®‰è£…äº†ä½ç‰ˆæœ¬çš„brewï¼Œä¸çŸ¥é“å•¥åŸå› æ­»æ´»è£…ä¸ä¸Šæ–°ç‰ˆæœ¬ï¼Œæˆ‘å¹²è„†é‡æ–°è£…äº†ä¸ªæœºï¼Œé‡æ–°å®‰è£…ï¼Œå°±éå¸¸é¡ºåˆ©</p>
<h3 id="2-å®‰è£…wget">2 å®‰è£…wget</h3>
<blockquote>
<p>Linuxç³»ç»Ÿä¸Šä¸€ä¸ªä¸‹è½½æ–‡ä»¶çš„å·¥å…·ã€‚</p>
</blockquote>
<p>å…¶å®æˆ‘æ„Ÿè§‰å®ƒçš„åŠŸèƒ½å’ŒbrewæŒºåƒçš„ï¼Œä½†ç”±äºæˆ‘å‚è€ƒçš„æ–‡ç« é‡Œç”¨äº†wgeté‚£æˆ‘å°±ç”¨å§ï¼ˆï¼‰<br>
ç”¨<code>brew install wget</code>å‘½ä»¤ï¼Œæˆ‘åœ¨è¿™ä¸€æ­¥å¾ˆé¡ºåˆ©ï¼Œçœç•¥ä¹‹ ã€‚</p>
<h3 id="3-å®‰è£…helm">3 å®‰è£…helm</h3>
<blockquote>
<p>Helm æ˜¯Deis å¼€å‘çš„ä¸€ä¸ªç”¨äºKubernetes åº”ç”¨çš„åŒ…ç®¡ç†å·¥å…·ï¼Œä¸»è¦ç”¨æ¥ç®¡ç†Chartsã€‚<br>
chart æ˜¯æè¿°ç›¸å…³çš„ä¸€ç»„Kubernetesèµ„æºçš„æ–‡ä»¶é›†åˆã€‚å•ä¸ªchartå¯èƒ½ç”¨äºéƒ¨ç½²ç®€å•çš„ä¸œè¥¿ï¼Œæ¯”å¦‚memcached podï¼Œæˆ–è€…ä¸€äº›å¤æ‚çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å®Œæ•´çš„å…·æœ‰HTTP æœåŠ¡ï¼Œæ•°æ®åº“ï¼Œç¼“å­˜ç­‰çš„Web åº”ç”¨ç¨‹åºå †æ ˆã€‚charté€šè¿‡åˆ›å»ºä¸ºç‰¹å®šç›®å½•æ ‘çš„æ–‡ä»¶ï¼Œå°†å®ƒä»¬æ‰“åŒ…åˆ°ç‰ˆæœ¬åŒ–çš„å‹ç¼©åŒ…ï¼Œç„¶åè¿›è¡Œéƒ¨ç½²ã€‚</p>
</blockquote>
<p>æŒ‰ç…§æ–‡æ¡£ä¸Šçš„æ“ä½œï¼Œæˆ‘åœ¨è¿è¡Œå®Œ</p>
<pre><code>wget https://get.helm.sh/helm-v3.2.1-linux-amd64.tar.gz 
tar -zxvf helm-v3.2.1-linux-amd64.tar.gz 
cp linux-amd64/helm /usr/local/bin/
</code></pre>
<p>åï¼Œå‡ºç°äº†<code>zsh: exec format error: helm</code>çš„æŠ¥é”™ ï¼Œç®€å•æœç´¢äº†ä¸€ä¸‹ï¼Œä¼¼ä¹æ˜¯æ— æ³•è§£ææ–‡ä»¶ï¼Ÿäºæ˜¯æˆ‘åˆé‡æ–°è¿›è¡Œå®‰è£…helmçš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¿è¡Œ<code>brew install kubernetes-helm</code>ï¼Œåˆå‡ºç°äº†é”™è¯¯ã€‚</p>
<pre><code>Error: The `brew link` step did not complete successfully
The formula built, but is not symlinked into /usr/local
Could not symlink bin/helm
Target /usr/local/bin/helm
already exists. You may want to remove it:
  rm '/usr/local/bin/helm'
</code></pre>
<p>åŸå› ä¼¼ä¹æ˜¯ä¹‹å‰å·²ç»è£…äº†ä¸€æ¬¡helmï¼Œæ–‡ä»¶é‡å¤äº†<br>
äºæ˜¯æˆ‘æŒ‰ç…§æç¤ºï¼Œè¿è¡Œ</p>
<pre><code>rm '/usr/local/bin/helm'
brew link helm
brew install kubernetes-helm
</code></pre>
<p>å®‰è£…helmçš„è¿‡ç¨‹åˆ°æ­¤ç»“æŸã€‚</p>
<h3 id="4-å®‰è£…kubectl">4 å®‰è£…kubectl</h3>
<blockquote>
<p>kubectlæ˜¯Kubernetes å‘½ä»¤è¡Œå·¥å…·ï¼Œä½¿å¾—ä½ å¯ä»¥å¯¹ Kubernetes é›†ç¾¤è¿è¡Œå‘½ä»¤ã€‚ ä½ å¯ä»¥ä½¿ç”¨ kubectl æ¥éƒ¨ç½²åº”ç”¨ã€ç›‘æµ‹å’Œç®¡ç†é›†ç¾¤èµ„æºä»¥åŠæŸ¥çœ‹æ—¥å¿—ã€‚</p>
</blockquote>
<p>ç”±äºå‰é¢æˆ‘ä»¬å·²ç»å®‰è£…äº†brewï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è¿è¡Œ<code>brew install kubectl</code> ã€‚<br>
å†è¿è¡Œ<code>kubectl version</code>æ¥ç¡®å®šæ˜¯å¦å®‰è£…æˆåŠŸï¼Œå½“å‡ºç°ç±»ä¼¼äº</p>
<pre><code>Client Version: version.Info{Major:&quot;1&quot;, Minor:&quot;20&quot;, GitVersion:&quot;v1.20.2&quot;, GitCommit:&quot;faecb196815e248d3ecfb03c680a4507229c2a56&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2021-01-14T05:14:17Z&quot;, GoVersion:&quot;go1.15.6&quot;, Compiler:&quot;gc&quot;, Platform:&quot;darwin/amd64&quot;}
Server Version: version.Info{Major:&quot;1&quot;, Minor:&quot;18+&quot;, GitVersion:&quot;v1.18.4-tke.3&quot;, GitCommit:&quot;f8797eb035aca9c928af02ea9a74d232cfd41bc6&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2020-10-12T03:32:01Z&quot;, GoVersion:&quot;go1.14.8&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}
</code></pre>
<p>çš„ä»£ç æ—¶è¯´æ˜å·²ç»å®‰è£…æˆåŠŸå•¦ã€‚</p>
<h3 id="5-éƒ¨ç½²å‹æµ‹é›†ç¾¤">5 éƒ¨ç½²å‹æµ‹é›†ç¾¤</h3>
<p>æ¥ç€æŒ‰ç…§æ–‡ç« çš„å†…å®¹ï¼Œè¿è¡Œ</p>
<pre><code>git clone https://github.com/tkestack/charts.git
cd charts/
helm install your-name incubator/jmeter-suite  ï¼ˆè¿™é‡Œçš„your-nameè¯·æ›´æ”¹ä¸ºè‡ªå·±ç»™æœåŠ¡å–çš„åå­—ï¼‰
</code></pre>
<p>ç„¶åå‡ºç°æŠ¥é”™</p>
<pre><code>Error: Kubernetes cluster unreachable: 
Get &quot;http://localhost:8080/version?timeout=32s&quot;: dial tcp 127.0.0.1:8080: connect: connection refused
</code></pre>
<p>è¿™é‡Œè¦é…ç½®ç¯å¢ƒå˜é‡KUBECONFIGï¼Œéœ€è¦è¿è¡Œ<code>export KUBECONFIG=é›†ç¾¤é…ç½®æ–‡ä»¶çš„è·¯å¾„</code>ï¼Œä½†è¿™ä¸ªé…ç½®æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œç»ˆç«¯çª—å£ä¸€å…³é—­æˆ–è€…æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ å°±éœ€è¦é‡æ–°é…ç½®ï¼Œå¦‚æœéœ€è¦æ›´æ”¹å…¨å±€çš„ç¯å¢ƒå˜é‡éœ€è¦æ›´æ”¹<code>~/.bash_profile</code>æ–‡ä»¶ã€‚</p>
<p>ç„¶åè§£å†³å®Œä¸Šé¢è¿™ä¸ªæŠ¥é”™åï¼Œå†é‡æ–°è¿è¡Œ<code>helm install your-name incubator/jmeter-suite</code> ï¼Œéšååˆå‡ºç°äº†æŠ¥é”™</p>
<pre><code>Error: rendered manifests contain a resource that already exists. 
Unable to continue with install: ServiceAccount &quot;jmeter-influxdb&quot; in namespace &quot;default&quot; exists and cannot be imported into the current release: invalid ownership metadata; 
annotation validation error: missing key &quot;meta.helm.sh/release-name&quot;: must be set to &quot;test&quot;; annotation validation error: missing key &quot;meta.helm.sh/release-namespace&quot;: must be set to &quot;default&quot;
</code></pre>
<p>å‘ƒå¤§æ¦‚æ„æ€å°±æ˜¯æœ¬åœ° å·²ç»æœ‰äº†ä¸€ä¸ªnamespaceä¸ºdefaultçš„jmeteräº†ï¼Œè§£å†³è¿™ä¸ªé”™è¯¯æŒºç®€å•</p>
<ul>
<li>1 è¿è¡Œ<code>helm list --all --all-namespaces</code>ï¼ŒæŸ¥çœ‹ç³»ç»Ÿé‡Œæ‰€æœ‰çš„releasesã€‚</li>
<li>2 è¿è¡Œ <code>helm uninstall jmeter -n default</code>ï¼Œå¸è½½è¿™ä¸ªnamespaceä¸ºdefaultçš„jmeterã€‚</li>
</ul>
<p>éšåä¾¿å¯ä»¥å®‰è£…jmeteräº†ï¼Œé‡æ–°è¿è¡Œ<code>helm install your-name incubator/jmeter-suite</code> ï¼Œè¿™æ¬¡æˆåŠŸäº†ï¼Œéšåå‡ºç°</p>
<pre><code>NAME: test
LAST DEPLOYED: Wed Jan 27 17:18:21 2021
NAMESPACE: default
STATUS: deployed
REVISION: 1
</code></pre>
<h3 id="6-ç¼–å†™è„šæœ¬">6 ç¼–å†™è„šæœ¬</h3>
<h4 id="æ‰“å¼€jmeterå·¥å…·">æ‰“å¼€jmeterå·¥å…·</h4>
<p>åœ¨<a href="http://jmeter.apache.org/download_jmeter.cgi">Jmeterå®˜ç½‘</a>ä¸‹è½½å¥½jmeterï¼Œæˆ‘ä¸‹è½½çš„æ˜¯å¦‚å›¾çš„é»‘è‰²å­—ä½“ç‰ˆæœ¬ã€‚<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128112808907-709044756.png" alt="" loading="lazy"></p>
<p>æ¥ç€æˆ‘åŒå‡»/binç›®å½•ä¸‹çš„ApacheJMeter.jaræ–‡ä»¶ï¼Œæ‰“ä¸å¼€ã€‚å°±ç®—æŠŠç”µè„‘çš„é‚£ä¸ªå®‰å…¨æ€§æé†’å…³æ‰ä¹Ÿæ‰“ä¸å¼€ï¼Œå¥½å§ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤å¼ºåˆ¶æ‰“å¼€<br>
<code>java -jar /Users/chrystal/Documents/apache-jmeter-5.4.1\ 2/bin/ApacheJMeter.jar (è¯·æŠŠåé¢çš„è·¯å¾„æ”¹ä¸ºè‡ªå·±å­˜æ”¾æ–‡ä»¶çš„è·¯å¾„)</code><br>
æ­¤æ—¶å‘½ä»¤è¡Œå¦‚ä¸‹å›¾<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128153435642-204495638.png" alt="" loading="lazy"><br>
è¿™è¯´æ˜ï¼ä¸èƒ½ç”¨è¿™ä¸ªçª—å£æ¥è·‘æµ‹è¯•è„šæœ¬ï¼æ‰€ä»¥æˆ‘ä»¬è¦æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£è¿›è¡Œåé¢çš„æ“ä½œã€‚<strong>æ–°å¼€çš„ç»ˆç«¯çª—å£è®°å¾—é…ç½®kubernetesç¯å¢ƒå˜é‡ã€‚</strong></p>
<p>è¯¥jaråŒ…æ‰“å¼€çš„ç•Œé¢å¦‚ä¸‹<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128113245718-1612241731.png" alt="" loading="lazy"></p>
<p>å¯ä»¥æŠŠåŸæ–‡ç« ä¸­æåˆ°çš„demoæµ‹è¯•è„šæœ¬ç”¨å®ƒæ‰“å¼€ï¼Œå¦‚å›¾<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128113956129-1944218852.png" alt="" loading="lazy"></p>
<p>æ¥ä¸‹æ¥å‚è€ƒdemoè„šæœ¬å†™ä¸€ä¸ªè‡ªå·±çš„è„šæœ¬ï¼Œå…·ä½“çš„åŸºç¡€è®¾ç½®è§£é‡Šåœ¨åŸæ–‡ç« é‡Œæœ‰ã€‚é‚£ä¹ˆæµ‹è¯•ä¸€ä¸‹<a href="https://home.cnblogs.com/blog/">åšå®¢å›­</a>çš„æ¥å£å§ã€‚</p>
<h4 id="è®¾ç½®è„šæœ¬">è®¾ç½®è„šæœ¬</h4>
<p>åœ¨jmeterå¤„æ–°å»ºä¸ªæ–‡ä»¶ï¼Œæ·»åŠ çº¿ç¨‹ç»„<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128153845661-1981468078.png" alt="" loading="lazy"><br>
ä¸‹é¢çº¢æ¡†å¤„æ˜¯æˆ‘æ›´æ”¹åçš„é…ç½®ï¼Œé‡è¦çš„æ˜¯æˆ‘è®¾ç½®äº†5000ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯2æ¬¡ã€‚*<em>ï¼ˆ<em>æˆ‘åæ¥æ”¹äº†ï¼Œå› ä¸ºçº¿ç¨‹ç»„å¤ªå¤šäº†ï¼Œæµ‹è¯•åœä¸ä¸‹æ¥ï¼Œæ”¹æˆäº†50x200ï¼‰</em></em><br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128154430799-1150394626.png" alt="" loading="lazy"><br>
å³é”®çº¿ç¨‹ç»„ï¼Œæ·»åŠ httpè¯·æ±‚ï¼Œå¹¶è®¾ç½®IPåœ°å€ã€‚<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128154726479-1291219254.png" alt="" loading="lazy"><br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128154932494-1538521586.png" alt="" loading="lazy"><br>
åˆ°è¿™é‡Œæˆ‘ä»¬åŸºæœ¬é…ç½®å¥½äº†çº¿ç¨‹ç»„çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨è¿™æ¬¡æµ‹è¯•ä¸­ä¼šå‘åšå®¢å›­å‘é€10000ä¸ªhttpè¯·æ±‚æ¥æµ‹è¯•å®ƒçš„æ‰¿å—èƒ½åŠ›ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦å¯¹è¿”å›çš„ç»“æœè¿›è¡Œåˆ†æï¼Œæ‰€ä»¥è¿˜è¦å†æ·»åŠ ä¸€äº›ç›‘å¬å™¨æ¥å¤„ç†ç»“æœã€‚</p>
<ul>
<li>æ·»åŠ åç«¯ç›‘å¬å™¨<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128160255678-365071639.png" alt="" loading="lazy"><br>
å¯¹å…¶è¿›è¡Œç®€å•è®¾ç½®<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128171407839-982811206.png" alt="" loading="lazy"></li>
<li>æ·»åŠ å¯Ÿçœ‹ç»“æœæ ‘<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128155849233-319381560.png" alt="" loading="lazy"><br>
è‡ªå·±å–œæ¬¢å•¥å°±æ·»åŠ å•¥å§ï¼Œæˆ‘æ„Ÿè§‰ä½œç”¨éƒ½å·®ä¸å¤šï¼Œåœ¨è¿™é‡Œæˆ‘æ·»åŠ äº†<strong>å¯Ÿçœ‹ç»“æœæ ‘</strong>å’Œ<strong>æ±‡æ€»å›¾</strong>ã€‚</li>
</ul>
<p>é…ç½®å®Œæ‰€æœ‰ä¸œè¥¿åï¼Œæˆ‘ä»¬è¿è¡Œä¸€ä¸‹è„šæœ¬çœ‹çœ‹æœ‰æ— é”™è¯¯ã€‚<br>
æœç„¶æœ‰é”™è¯¯å•Šï¼Œæˆ‘çš„äººç”Ÿæœç„¶ä¸ä¼šè¿™ä¹ˆä¸€å¸†é£é¡ºå•Šï¼ˆï¼‰è¿è¡Œä¸€ä¼šå„¿å¾ˆå¿«å°±é€€å‡ºäº†ï¼Œç‚¹å‡»å¯Ÿçœ‹ç»“æœæ ‘å‡ºæ¥çš„å…¨æ˜¯é”™è¯¯ï¼Œ<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128162605380-123415813.png" alt="" loading="lazy"><br>
ç„¶åç‚¹å‡»å“åº”æ•°æ®å»æŸ¥çœ‹è¿”å›äº†å•¥é”™è¯¯<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128163131165-971324307.png" alt="" loading="lazy"><br>
è¿™é‡Œè¯´è¯·æ±‚çš„hostçš„æ ¼å¼é”™è¯¯ã€‚ç»è¿‡æˆ‘çš„ä¸€ç•ªç ”ç©¶ï¼ŒåŸæ¥æˆ‘åœ¨ä¸Šé¢çš„è®¾ç½®IPåœ°å€æ—¶ç›´æ¥å¤åˆ¶äº†åšå®¢å›­çš„ä¸»é¡µï¼ŒåŒ…å«äº†ç‰¹æ®Šç¬¦å·ã€‚ä¹Ÿå°±æ˜¯è¯´å…·ä½“çš„è·¯å¾„ä¸èƒ½å†™åœ¨æœåŠ¡å™¨IPåœ°å€é‚£é‡Œï¼Œæ­£ç¡®å†™æ³•åº”è¯¥æ˜¯è¿™æ ·<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128164451383-1237225730.png" alt="" loading="lazy"><br>
æ”¹å®Œä»¥åå†è¿è¡Œï¼Œå°±éå¸¸é¡ºåˆ©ï¼Œå¦‚å›¾<br>
<img src="https://img2020.cnblogs.com/blog/1943681/202101/1943681-20210128165055353-1436304318.png" alt="" loading="lazy"></p>
<p>è„šæœ¬ç¼–å†™åˆ°æ­¤å®Œæˆï¼</p>
<h3 id="7-å‘èµ·æµ‹è¯•">7 å‘èµ·æµ‹è¯•</h3>
<p>è¿è¡Œ<code>kubectl get pods</code>ç¡®è®¤ä¸€ä¸‹æœ‰æ²¡æœ‰è¿æ¥åˆ°kubernetesé›†ç¾¤ï¼Œå‡ºç°äº†ç±»ä¼¼äº</p>
<pre><code>NAME                                              READY   STATUS    RESTARTS   AGE
jmeter-influxdb-0                                 1/1     Running   0          23h
test-distributed-jmeter-master-77749c5845-89c6w   1/1     Running   0          23h
test-distributed-jmeter-server-5556bbf5fc-2hxvg   1/1     Running   0          23h
test-distributed-jmeter-server-5556bbf5fc-fztws   1/1     Running   0          23h
test-distributed-jmeter-server-5556bbf5fc-lmsdw   1/1     Running   0          23h
test-grafana-584875d9d4-zsfzz                     1/1     Running   0          23h
</code></pre>
<p>çš„å†…å®¹å°±æ˜¯è¿æ¥æˆåŠŸäº†ã€‚<br>
ç„¶åè¿è¡Œ<code>sh start_test.sh ä½ çš„æ–‡ä»¶ç›®å½•</code>ï¼Œå°±å¯ä»¥åœ¨é›†ç¾¤ä¸Šè¿›è¡Œæµ‹è¯•äº†ã€‚</p>
<h3 id="8-æŸ¥çœ‹ç»“æœ">8 æŸ¥çœ‹ç»“æœ</h3>
<p>è¿è¡Œå®Œæˆä»¥åç»ˆç«¯çª—å£ä¼šå‡ºç°</p>
<pre><code>Creating summariser &lt;summary&gt;
Created the tree successfully using /jmeter/test2.jmx
Configuring remote engine: 192.168.0.131
Configuring remote engine: 192.168.0.189
Configuring remote engine: 192.168.0.134
Starting distributed test with remote engines: [192.168.0.189, 192.168.0.134, 192.168.0.131] @ Thu Jan 28 09:16:07 UTC 2021 (1611825367766)
Remote engines have been started:[192.168.0.189, 192.168.0.134, 192.168.0.131]
Waiting for possible Shutdown/StopTestNow/HeapDump/ThreadDump message on port 4445
summary +   3104 in 00:00:22 =  143.4/s Avg:   598 Min:    40 Max: 16565 Err:     6 (0.19%) Active: 150 Started: 150 Finished: 0
summary +   4400 in 00:00:30 =  146.3/s Avg:   772 Min:    41 Max: 32547 Err:     4 (0.09%) Active: 150 Started: 150 Finished: 0
summary =   7504 in 00:00:52 =  145.1/s Avg:   700 Min:    40 Max: 32547 Err:    10 (0.13%)
summary +   4600 in 00:00:31 =  150.6/s Avg:   854 Min:    40 Max: 64926 Err:     7 (0.15%) Active: 149 Started: 150 Finished: 1
summary =  12104 in 00:01:22 =  147.1/s Avg:   759 Min:    40 Max: 64926 Err:    17 (0.14%)
summary +   4400 in 00:00:30 =  149.0/s Avg:   742 Min:    42 Max: 68044 Err:     2 (0.05%) Active: 132 Started: 150 Finished: 18
summary =  16504 in 00:01:52 =  147.6/s Avg:   754 Min:    40 Max: 68044 Err:    19 (0.12%)
summary +   4500 in 00:00:30 =  150.5/s Avg:  1100 Min:    42 Max: 131100 Err:    13 (0.29%) Active: 98 Started: 150 Finished: 52
summary =  21004 in 00:02:22 =  148.2/s Avg:   828 Min:    40 Max: 131100 Err:    32 (0.15%)
summary +   4600 in 00:00:30 =  153.0/s Avg:   801 Min:    41 Max: 130543 Err:    11 (0.24%) Active: 51 Started: 150 Finished: 99
summary =  25604 in 00:02:52 =  149.1/s Avg:   823 Min:    40 Max: 131100 Err:    43 (0.17%)
summary +   4396 in 00:01:12 =   61.0/s Avg:   438 Min:    40 Max: 131063 Err:     7 (0.16%) Active: 0 Started: 150 Finished: 150
summary =  30000 in 00:04:04 =  123.0/s Avg:   767 Min:    40 Max: 131100 Err:    50 (0.17%)
Tidying up remote @ Thu Jan 28 09:20:12 UTC 2021 (1611825612504)
... end of run
</code></pre>
<p>ç„¶ååŸæ–‡ç« å¾ˆè¯¦ç»†åœ°å†™äº†å¦‚ä½•æŸ¥çœ‹ç»“æœï¼Œè¿™é‡Œçœç•¥ã€‚</p>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">ä¸‹ä¸€ç¯‡</div>
                <a href="https://nanagan.github.io/post/stress-testing/" class="post-title gt-a-link">
                    ã€æ–°æ‰‹å¿…è¯»ã€‘å…³äºå‹åŠ›æµ‹è¯•ä¸å¾—ä¸è¯´çš„äºŒä¸‰äº‹
                </a>
            </div>
        

        
            <span id="/post/jmeter-test/" class="leancloud_visitors" data-flag-title="åœ¨Macä¸Šåˆ©ç”¨å‹æµ‹å·¥å…·Jmeter-Suiteè¿›è¡Œä¸€æ¬¡å‹æµ‹å®è·µçš„ä¿å§†çº§è¯¦ç»†æ­¥éª¤ï¼ˆå‚è€ƒè…¾è®¯äº‘æ–‡ç« ï¼‰">
                <em class="post-meta-item-text">é˜…è¯»é‡ </em>
                <i class="leancloud-visitors-count">0</i>
            </span>
        

        
            
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
<script>
    // md5.min.js
    !function(n){
        "use strict";
        function d(n,t){var r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}
        function f(n,t,r,e,o,u){return d((c=d(d(t,n),d(e,u)))<<(f=o)|c>>>32-f,r);var c,f}
        function l(n,t,r,e,o,u,c){return f(t&r|~t&e,n,t,o,u,c)}
        function v(n,t,r,e,o,u,c){return f(t&e|r&~e,n,t,o,u,c)}
        function g(n,t,r,e,o,u,c){return f(t^r^e,n,t,o,u,c)}
        function m(n,t,r,e,o,u,c){return f(r^(t|~e),n,t,o,u,c)}
        function i(n,t){var r,e,o,u,c;n[t>>5]|=128<<t%32,n[14+(t+64>>>9<<4)]=t;var f=1732584193,i=-271733879,a=-1732584194,h=271733878;for(r=0;r<n.length;r+=16)f=l(e=f,o=i,u=a,c=h,n[r],7,-680876936),h=l(h,f,i,a,n[r+1],12,-389564586),a=l(a,h,f,i,n[r+2],17,606105819),i=l(i,a,h,f,n[r+3],22,-1044525330),f=l(f,i,a,h,n[r+4],7,-176418897),h=l(h,f,i,a,n[r+5],12,1200080426),a=l(a,h,f,i,n[r+6],17,-1473231341),i=l(i,a,h,f,n[r+7],22,-45705983),f=l(f,i,a,h,n[r+8],7,1770035416),h=l(h,f,i,a,n[r+9],12,-1958414417),a=l(a,h,f,i,n[r+10],17,-42063),i=l(i,a,h,f,n[r+11],22,-1990404162),f=l(f,i,a,h,n[r+12],7,1804603682),h=l(h,f,i,a,n[r+13],12,-40341101),a=l(a,h,f,i,n[r+14],17,-1502002290),f=v(f,i=l(i,a,h,f,n[r+15],22,1236535329),a,h,n[r+1],5,-165796510),h=v(h,f,i,a,n[r+6],9,-1069501632),a=v(a,h,f,i,n[r+11],14,643717713),i=v(i,a,h,f,n[r],20,-373897302),f=v(f,i,a,h,n[r+5],5,-701558691),h=v(h,f,i,a,n[r+10],9,38016083),a=v(a,h,f,i,n[r+15],14,-660478335),i=v(i,a,h,f,n[r+4],20,-405537848),f=v(f,i,a,h,n[r+9],5,568446438),h=v(h,f,i,a,n[r+14],9,-1019803690),a=v(a,h,f,i,n[r+3],14,-187363961),i=v(i,a,h,f,n[r+8],20,1163531501),f=v(f,i,a,h,n[r+13],5,-1444681467),h=v(h,f,i,a,n[r+2],9,-51403784),a=v(a,h,f,i,n[r+7],14,1735328473),f=g(f,i=v(i,a,h,f,n[r+12],20,-1926607734),a,h,n[r+5],4,-378558),h=g(h,f,i,a,n[r+8],11,-2022574463),a=g(a,h,f,i,n[r+11],16,1839030562),i=g(i,a,h,f,n[r+14],23,-35309556),f=g(f,i,a,h,n[r+1],4,-1530992060),h=g(h,f,i,a,n[r+4],11,1272893353),a=g(a,h,f,i,n[r+7],16,-155497632),i=g(i,a,h,f,n[r+10],23,-1094730640),f=g(f,i,a,h,n[r+13],4,681279174),h=g(h,f,i,a,n[r],11,-358537222),a=g(a,h,f,i,n[r+3],16,-722521979),i=g(i,a,h,f,n[r+6],23,76029189),f=g(f,i,a,h,n[r+9],4,-640364487),h=g(h,f,i,a,n[r+12],11,-421815835),a=g(a,h,f,i,n[r+15],16,530742520),f=m(f,i=g(i,a,h,f,n[r+2],23,-995338651),a,h,n[r],6,-198630844),h=m(h,f,i,a,n[r+7],10,1126891415),a=m(a,h,f,i,n[r+14],15,-1416354905),i=m(i,a,h,f,n[r+5],21,-57434055),f=m(f,i,a,h,n[r+12],6,1700485571),h=m(h,f,i,a,n[r+3],10,-1894986606),a=m(a,h,f,i,n[r+10],15,-1051523),i=m(i,a,h,f,n[r+1],21,-2054922799),f=m(f,i,a,h,n[r+8],6,1873313359),h=m(h,f,i,a,n[r+15],10,-30611744),a=m(a,h,f,i,n[r+6],15,-1560198380),i=m(i,a,h,f,n[r+13],21,1309151649),f=m(f,i,a,h,n[r+4],6,-145523070),h=m(h,f,i,a,n[r+11],10,-1120210379),a=m(a,h,f,i,n[r+2],15,718787259),i=m(i,a,h,f,n[r+9],21,-343485551),f=d(f,e),i=d(i,o),a=d(a,u),h=d(h,c);return[f,i,a,h]}
        function a(n){var t,r="",e=32*n.length;for(t=0;t<e;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}
        function h(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var e=8*n.length;for(t=0;t<e;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}
        function e(n){var t,r,e="0123456789abcdef",o="";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),o+=e.charAt(t>>>4&15)+e.charAt(15&t);return o}
        function r(n){return unescape(encodeURIComponent(n))}
        function o(n){return a(i(h(t=r(n)),8*t.length));var t}
        function u(n,t){return function(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,16<o.length&&(o=i(o,8*n.length)),r=0;r<16;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(h(t)),512+8*t.length),a(i(c.concat(e),640))}(r(n),r(t))}
        function t(n,t,r){return t?r?u(t,n):e(u(t,n)):r?o(n):e(o(n))}
        "function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:n.md5=t;
    }(this);
</script>


<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '9c48c7e0e2634071603c',
    clientSecret: 'aa60541428be66cdcefcce0792bbf9090827b031',
    repo: 'nanagan.github.io',
    owner: 'nanagan',
    admin: ['nanagan'],
    id: md5(location.pathname),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false       // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

            

            
        

        
            <script src='https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js'></script>

<style>
	div#vcomments{
		width:100%;
		max-width: 1000px;
		padding: 2.5%
	}
</style>


	<div id="vcomments"></div>

<script>
	new Valine({
		el: '#vcomments',
		appId: 'Fwb8Sh0if5a89ivip2D7ltLE-gzGzoHsz',
		appKey: 'yKd7GvF6flIjh1opobdCmzdI',
		avatar: '',
		pageSize: 5,
		recordIp: false,
		placeholder: 'æ¬¢è¿ç•™è¨€ğŸ‘',
		visitor: true,
	});
</script>

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">é¹…å‚ä½çº§å·¥ç¨‹å¸ˆï¼ˆå¤§é›¾</div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://nanagan.github.io/atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
